{
  "meta": {
    "project": "GAP Intel",
    "date": "2026-01-21",
    "prepared_by": "Generated by TestSprite"
  },
  "product_overview": "GAP Intel is an AI-driven SaaS platform designed to help YouTube creators identify content gaps in their channels. By leveraging data analysis and AI-powered insights, creators receive actionable recommendations to create videos that match audience demand, optimize titles, thumbnails, and upload schedules, enhancing channel growth and viewer engagement.",
  "core_goals": [
    "Empower YouTube creators to discover underserved content topics based on audience feedback.",
    "Provide AI-verified content gaps with actionable video planning suggestions including titles, hooks, and thumbnail optimization.",
    "Offer a seamless analysis pipeline integrating user-triggered data ingestion, AI-driven processing, and clear result delivery via dashboard and email.",
    "Support user subscription management with tiered access and usage limits to scale service offerings.",
    "Ensure data privacy and user control through opt-in preferences for data collection.",
    "Enable enterprise customers with dedicated API access, team management, and white-label branding options."
  ],
  "key_features": [
    "Content Gap Analysis: Analyze YouTube channel videos and comments to identify high-signal audience questions using multi-phase AI verification (signal filtering, pain point extraction, verification, and optimization).",
    "Health Check Endpoints: Provide service status and version information via root and health endpoints.",
    "YouTube Analytics OAuth Integration: Securely connect to YouTube Analytics to collect CTR data and provide enhanced dashboard insights.",
    "Subscription Management: Handle user subscription tiers, limits, and Stripe webhook payments for subscription lifecycle management.",
    "Premium Intelligence Modules: Include advanced thumbnail CTR prediction, competitor discovery, content clustering, and view prediction features.",
    "Enterprise Public API: Secure API endpoints using distinct API keys with strict rate limiting and detailed usage statistics for enterprise customers.",
    "User Data Settings Management: Offer APIs to view and update user opt-in preferences for data collection.",
    "Video Viral Potential Prediction: Predict the virality of new video ideas based on input title, hook, and topic using ML models.",
    "Enterprise Team & API Key Management: Manage enterprise team members, roles, API keys, and white-label branding via dedicated endpoints.",
    "CTR Model Management: Monitor training stats and trigger model retraining processes for improved CTR prediction."
  ],
  "user_flow_summary": [
    "User visits landing page and submits a YouTube channel handle along with email address.",
    "User completes payment via Stripe; a webhook triggers backend analysis.",
    "Backend queues the analysis job and performs multi-phase AI processing extracting content gaps from channel videos and comments.",
    "On analysis completion, user receives an email with a unique access key for report access.",
    "User accesses the premium interactive dashboard displaying content gaps, health scores, competitor insights, and optimization suggestions.",
    "Subscribed users can connect their YouTube Analytics account through OAuth to enhance dashboard metrics with CTR data.",
    "Premium users utilize advanced tools for thumbnail optimization, competitor discovery, and publish time recommendations.",
    "Enterprise customers manage teams, API keys, and branding; consume APIs with usage tracking and rate limiting.",
    "Users manage data collection preferences and subscription statuses through API endpoints.",
    "Developers and admins monitor system health via API health endpoints and model training statuses."
  ],
  "validation_criteria": [
    "Successful processing and queuing of analysis jobs with correct handling of request validation and API key security.",
    "Reliable identification and categorization of content gaps with AI verification as TRUE_GAP, UNDER_EXPLAINED, or SATURATED.",
    "Robust handling of payment workflows, Stripe webhook events, and subscription status validations.",
    "Accurate prediction of thumbnail CTR and viral potential, validated against model training statistics.",
    "Seamless OAuth authentication flow for YouTube Analytics with correct status reporting and disconnection functionality.",
    "Proper enforcement of rate limits and API key authorization, especially for enterprise endpoints.",
    "Complete and consistent delivery of interactive dashboard reports with correct Health Score calculations.",
    "User data preferences respected and correctly updated in system storage.",
    "Enterprise team and API key management functions operate with expected role-based access and data integrity.",
    "System health endpoints return accurate and timely service status and version information."
  ],
  "code_summary": {
    "tech_stack": [
      "Python 3.11",
      "FastAPI",
      "Supabase (PostgreSQL)",
      "OpenAI",
      "Google Generative AI",
      "Stripe",
      "Uvicorn",
      "scikit-learn",
      "XGBoost",
      "Sentence-Transformers"
    ],
    "features": [
      {
        "name": "Health Check",
        "description": "Root health check endpoint returning service status and version",
        "files": [
          "railway-api/server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/": {
              "get": {
                "summary": "Root health check",
                "responses": {
                  "200": {
                    "description": "Service status",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string"
                            },
                            "service": {
                              "type": "string"
                            },
                            "version": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/health": {
              "get": {
                "summary": "Railway health check",
                "responses": {
                  "200": {
                    "description": "OK",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string"
                            },
                            "service": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Channel Analysis",
        "description": "Core analysis endpoint that triggers gap analysis for a YouTube channel. Queues background jobs with rate limiting.",
        "files": [
          "railway-api/server.py",
          "railway-api/GAP_ULTIMATE.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/analyze": {
              "post": {
                "summary": "Trigger gap analysis for a YouTube channel",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "required": [
                          "channel_name",
                          "access_key",
                          "email"
                        ],
                        "properties": {
                          "channel_name": {
                            "type": "string",
                            "description": "YouTube @handle"
                          },
                          "access_key": {
                            "type": "string",
                            "description": "GAP-xxxxx format key"
                          },
                          "email": {
                            "type": "string",
                            "description": "User email"
                          },
                          "video_count": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 100,
                            "default": 1
                          },
                          "include_shorts": {
                            "type": "boolean",
                            "default": true
                          },
                          "tier": {
                            "type": "string",
                            "enum": [
                              "starter",
                              "pro",
                              "enterprise"
                            ]
                          },
                          "language": {
                            "type": "string",
                            "enum": [
                              "en",
                              "de",
                              "fr",
                              "it",
                              "es"
                            ],
                            "default": "en"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Analysis queued",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string"
                            },
                            "message": {
                              "type": "string"
                            },
                            "access_key": {
                              "type": "string"
                            },
                            "queue_position": {
                              "type": "integer"
                            }
                          }
                        }
                      }
                    }
                  },
                  "401": {
                    "description": "Invalid API key"
                  },
                  "429": {
                    "description": "Rate limit exceeded"
                  }
                }
              }
            },
            "/status/{access_key}": {
              "get": {
                "summary": "Poll status of an analysis",
                "parameters": [
                  {
                    "name": "access_key",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Analysis status",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "access_key": {
                              "type": "string"
                            },
                            "channel_name": {
                              "type": "string"
                            },
                            "status": {
                              "type": "string",
                              "enum": [
                                "queued",
                                "processing",
                                "completed",
                                "failed"
                              ]
                            },
                            "created_at": {
                              "type": "string",
                              "format": "date-time"
                            },
                            "completed_at": {
                              "type": "string",
                              "format": "date-time"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/queue-status": {
              "get": {
                "summary": "Get real-time job queue metrics",
                "responses": {
                  "200": {
                    "description": "Queue status",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "queue_length": {
                              "type": "integer"
                            },
                            "active_jobs": {
                              "type": "integer"
                            },
                            "max_concurrent": {
                              "type": "integer"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "YouTube Analytics OAuth",
        "description": "OAuth flow for connecting YouTube Analytics, collecting CTR data, and viewing channel dashboards",
        "files": [
          "railway-api/server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/youtube-analytics/authorize": {
              "get": {
                "summary": "Initiate YouTube Analytics OAuth flow",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "user_id",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  },
                  {
                    "name": "redirect_uri",
                    "in": "query",
                    "required": false,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Authorization URL",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string"
                            },
                            "authorization_url": {
                              "type": "string"
                            },
                            "state": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/api/youtube-analytics/status": {
              "get": {
                "summary": "Check YouTube Analytics connection status",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "user_id",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Connection status",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "status": {
                              "type": "string",
                              "enum": [
                                "connected",
                                "not_connected"
                              ]
                            },
                            "channel_id": {
                              "type": "string"
                            },
                            "expires_at": {
                              "type": "string",
                              "format": "date-time"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/api/youtube-analytics/disconnect": {
              "delete": {
                "summary": "Revoke YouTube Analytics access",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "user_id",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Disconnection result"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Subscription Management",
        "description": "Check user subscription tier/limits and handle Stripe webhook events for payment processing",
        "files": [
          "railway-api/server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/subscription/status": {
              "get": {
                "summary": "Check user subscription tier and limits",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "email",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Subscription details",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "tier": {
                              "type": "string"
                            },
                            "status": {
                              "type": "string"
                            },
                            "analyses_remaining": {
                              "type": "integer"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            },
            "/webhook/stripe-subscription": {
              "post": {
                "summary": "Handle Stripe subscription webhooks",
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object"
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Webhook processed"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Premium Thumbnail Analysis",
        "description": "Analyze thumbnails, predict CTR, and provide AI-powered optimization suggestions",
        "files": [
          "railway-api/server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/premium/analyze-thumbnail": {
              "post": {
                "summary": "Analyze thumbnail and predict CTR",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "required": [
                          "thumbnail_url",
                          "title",
                          "user_email"
                        ],
                        "properties": {
                          "thumbnail_url": {
                            "type": "string"
                          },
                          "title": {
                            "type": "string"
                          },
                          "user_email": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Thumbnail analysis with CTR prediction"
                  }
                }
              }
            },
            "/premium/predict-ctr": {
              "post": {
                "summary": "Predict CTR from thumbnail features",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "thumbnail_features": {
                            "type": "object"
                          },
                          "title": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "CTR prediction"
                  }
                }
              }
            },
            "/premium/optimize-thumbnail": {
              "post": {
                "summary": "Get AI optimization suggestions for thumbnail",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "required": [
                          "thumbnail_url",
                          "title"
                        ],
                        "properties": {
                          "thumbnail_url": {
                            "type": "string"
                          },
                          "title": {
                            "type": "string"
                          },
                          "topic": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Optimization suggestions"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Premium Competitor Discovery",
        "description": "Find and analyze competitor channels in the same niche",
        "files": [
          "railway-api/server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/premium/discover-competitors": {
              "post": {
                "summary": "Find competitor channels",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "required": [
                          "channel_handle"
                        ],
                        "properties": {
                          "channel_handle": {
                            "type": "string"
                          },
                          "max_competitors": {
                            "type": "integer",
                            "default": 10
                          },
                          "search_terms": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "List of competitor channels"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Premium Content Analysis",
        "description": "Gap analysis, content clustering, view prediction, and publish time optimization",
        "files": [
          "railway-api/server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/premium/gap-analysis": {
              "post": {
                "summary": "Comprehensive content gap discovery",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "channel_videos": {
                            "type": "array"
                          },
                          "competitor_videos": {
                            "type": "array"
                          },
                          "comment_gaps": {
                            "type": "array"
                          },
                          "trends": {
                            "type": "array",
                            "items": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Gap opportunities"
                  }
                }
              }
            },
            "/premium/cluster-content": {
              "post": {
                "summary": "Cluster videos by topic using ML embeddings",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "required": [
                          "videos"
                        ],
                        "properties": {
                          "videos": {
                            "type": "array"
                          },
                          "n_clusters": {
                            "type": "integer",
                            "minimum": 2,
                            "maximum": 20
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Content clusters with insights"
                  }
                }
              }
            },
            "/premium/predict-views": {
              "post": {
                "summary": "Predict view trajectory from early engagement",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "views_1h": {
                            "type": "integer"
                          },
                          "views_6h": {
                            "type": "integer"
                          },
                          "views_24h": {
                            "type": "integer"
                          },
                          "likes_24h": {
                            "type": "integer"
                          },
                          "comments_24h": {
                            "type": "integer"
                          },
                          "subscriber_count": {
                            "type": "integer"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "View predictions"
                  }
                }
              }
            },
            "/premium/optimal-publish-times": {
              "post": {
                "summary": "Find optimal publish times",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "content_type": {
                            "type": "string"
                          },
                          "videos": {
                            "type": "array"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Optimal publish times"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Enterprise Public API",
        "description": "Public API for enterprise customers with separate API key auth (X-GAP-API-Key) and rate limiting (500/day)",
        "files": [
          "railway-api/server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/v1/analyze": {
              "post": {
                "summary": "Enterprise channel analysis",
                "security": [
                  {
                    "GapApiKey": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "required": [
                          "channel_name"
                        ],
                        "properties": {
                          "channel_name": {
                            "type": "string"
                          },
                          "video_count": {
                            "type": "integer",
                            "minimum": 1,
                            "maximum": 50,
                            "default": 5
                          },
                          "webhook_url": {
                            "type": "string"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Analysis queued"
                  },
                  "401": {
                    "description": "Invalid API key"
                  },
                  "429": {
                    "description": "Rate limit exceeded"
                  }
                }
              }
            },
            "/api/v1/status/{analysis_id}": {
              "get": {
                "summary": "Check enterprise analysis status",
                "security": [
                  {
                    "GapApiKey": []
                  }
                ],
                "parameters": [
                  {
                    "name": "analysis_id",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Analysis status with report data if completed"
                  }
                }
              }
            },
            "/api/v1/usage": {
              "get": {
                "summary": "Get API usage statistics",
                "security": [
                  {
                    "GapApiKey": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Usage stats",
                    "content": {
                      "application/json": {
                        "schema": {
                          "type": "object",
                          "properties": {
                            "calls_today": {
                              "type": "integer"
                            },
                            "calls_remaining": {
                              "type": "integer"
                            },
                            "daily_limit": {
                              "type": "integer"
                            },
                            "resets_at": {
                              "type": "string"
                            }
                          }
                        }
                      }
                    }
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "User Data Settings",
        "description": "Manage user data collection opt-in preferences",
        "files": [
          "railway-api/server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/user/data-settings": {
              "get": {
                "summary": "Check user data collection opt-in status",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "user_id",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Data settings"
                  }
                }
              },
              "post": {
                "summary": "Update data collection preferences",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "required": [
                          "user_id",
                          "opt_in"
                        ],
                        "properties": {
                          "user_id": {
                            "type": "string"
                          },
                          "channel_id": {
                            "type": "string"
                          },
                          "opt_in": {
                            "type": "boolean"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Settings updated"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Video Prediction",
        "description": "Predict viral potential for a video idea based on title, hook, and topic",
        "files": [
          "railway-api/server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/predict-video": {
              "post": {
                "summary": "Predict viral potential for a video idea",
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "required": [
                          "title"
                        ],
                        "properties": {
                          "title": {
                            "type": "string"
                          },
                          "hook": {
                            "type": "string"
                          },
                          "topic": {
                            "type": "string",
                            "default": "General"
                          },
                          "access_key": {
                            "type": "string"
                          },
                          "history": {
                            "type": "array"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Viral potential prediction"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "Enterprise Team Management",
        "description": "Invite/remove team members, manage API keys, and white-label branding for enterprise organizations",
        "files": [
          "railway-api/server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/enterprise/team/invite": {
              "post": {
                "summary": "Invite team member",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "org_id",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  },
                  {
                    "name": "user_id",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "required": [
                          "email",
                          "role"
                        ],
                        "properties": {
                          "email": {
                            "type": "string"
                          },
                          "role": {
                            "type": "string",
                            "enum": [
                              "admin",
                              "editor",
                              "viewer"
                            ]
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Member invited"
                  }
                }
              }
            },
            "/enterprise/team/{member_id}": {
              "delete": {
                "summary": "Remove team member",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "member_id",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  },
                  {
                    "name": "org_id",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Member removed"
                  }
                }
              }
            },
            "/enterprise/api-keys": {
              "post": {
                "summary": "Create new API key",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "org_id",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "requestBody": {
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "name": {
                            "type": "string",
                            "default": "Default API Key"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "API key created"
                  }
                }
              },
              "get": {
                "summary": "List API keys",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "org_id",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "List of API keys"
                  }
                }
              }
            },
            "/enterprise/api-keys/{key_id}": {
              "delete": {
                "summary": "Revoke API key",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "key_id",
                    "in": "path",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  },
                  {
                    "name": "org_id",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Key revoked"
                  }
                }
              }
            },
            "/enterprise/branding": {
              "get": {
                "summary": "Get white-label branding",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "org_id",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Branding settings"
                  }
                }
              },
              "put": {
                "summary": "Update white-label branding",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "org_id",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "requestBody": {
                  "required": true,
                  "content": {
                    "application/json": {
                      "schema": {
                        "type": "object",
                        "properties": {
                          "logo_url": {
                            "type": "string"
                          },
                          "primary_color": {
                            "type": "string"
                          },
                          "company_name": {
                            "type": "string"
                          },
                          "hide_gap_intel_branding": {
                            "type": "boolean"
                          }
                        }
                      }
                    }
                  }
                },
                "responses": {
                  "200": {
                    "description": "Branding updated"
                  }
                }
              }
            }
          }
        }
      },
      {
        "name": "CTR Model Management",
        "description": "View CTR model training stats and trigger model retraining",
        "files": [
          "railway-api/server.py"
        ],
        "api_doc": {
          "openapi": "3.0.0",
          "paths": {
            "/api/ctr-model/stats": {
              "get": {
                "summary": "Get CTR model training statistics",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Model stats"
                  }
                }
              }
            },
            "/api/ctr-model/train": {
              "post": {
                "summary": "Trigger CTR model retraining",
                "security": [
                  {
                    "ApiKeyAuth": []
                  }
                ],
                "parameters": [
                  {
                    "name": "type",
                    "in": "query",
                    "required": true,
                    "schema": {
                      "type": "string",
                      "enum": [
                        "global",
                        "channel"
                      ]
                    }
                  },
                  {
                    "name": "channel_id",
                    "in": "query",
                    "required": false,
                    "schema": {
                      "type": "string"
                    }
                  }
                ],
                "responses": {
                  "200": {
                    "description": "Training started"
                  }
                }
              }
            }
          }
        }
      }
    ]
  }
}
